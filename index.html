<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dedicatoria Web Interactiva</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Lora:ital,wght@0,400;0,500;1,400&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Lora', serif;
        }
        .font-dancing-script {
            font-family: 'Dancing Script', cursive;
        }
        .reveal-block-animation {
            animation: revealBlock 1s cubic-bezier(0.215, 0.610, 0.355, 1.000) forwards;
        }
        @keyframes revealBlock {
            from { opacity: 0; clip-path: inset(0 100% 0 0); }
            to { opacity: 1; clip-path: inset(0 0 0 0); }
        }
        .fade-in-start { animation: fadeInStart 1.5s ease-in-out forwards; }
        @keyframes fadeInStart { from { opacity: 0; } to { opacity: 1; } }
        
        .fade-out-exit { animation: fadeOutExit 1s forwards; }
        @keyframes fadeOutExit { to { opacity: 0; transform: scale(0.9); visibility: hidden; } }

        .heart-beat { animation: beat 1.5s infinite ease-in-out; }
        @keyframes beat { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.1); } }

        .button-fade-out { animation: buttonFadeOut 0.5s ease-out forwards; }
        @keyframes buttonFadeOut { to { opacity: 0; transform: scale(0.8); visibility: hidden; } }

        .card-close-animation { animation: cardClose 1s ease-in forwards; }
        @keyframes cardClose { to { opacity: 0; transform: scale(0.8); visibility: hidden; } }
        
        #envelope-overlay {
            animation: fadeOutExit 1.5s 2s forwards;
        }
        
        #envelope-flap {
            transform-origin: top center;
            animation: closeFlap 1.5s cubic-bezier(0.68, -0.55, 0.27, 1.55) 0.5s forwards;
        }
        @keyframes closeFlap {
            from { transform: rotateX(0deg); }
            to { transform: rotateX(180deg); }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 to-gray-800 min-h-screen flex items-center justify-center p-4 overflow-x-hidden">

    <audio id="background-music" loop>
        <source src="https://ia600905.us.archive.org/6/items/mirame-remix-tiktok/7442489276688354103.mp3" type="audio/mpeg">
        Tu navegador no soporta el elemento de audio.
    </audio>

    <div id="introContainer" class="text-center fade-in-start w-full max-w-md mx-auto">
        <h1 class="font-dancing-script text-4xl sm:text-5xl md:text-6xl text-pink-300">Una sorpresa interactiva...</h1>
        <p class="text-slate-400 mt-4 text-lg sm:text-xl">Un regalo digital inolvidable</p>
        <div class="my-10">
            <svg class="w-16 h-16 sm:w-20 sm:h-20 text-pink-400 heart-beat inline-block" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg>
        </div>
        <button id="openLetterButton" class="bg-pink-500 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-pink-600 transition-transform transform hover:scale-105 duration-300 text-lg">
            Ver demostración
        </button>
    </div>

    <div id="letterCard" class="bg-slate-800/80 backdrop-blur-sm shadow-2xl rounded-2xl max-w-2xl w-full p-6 sm:p-8 md:p-10 lg:p-12 mx-auto my-8 border-t-4 border-pink-500 hidden relative">
        <button id="music-control-button" class="hidden absolute top-4 right-4 text-pink-400 hover:text-pink-200 transition-colors z-10">
            <div id="play-icon" class="hidden">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path d="M18 3a1 1 0 00-1.196-.98l-10 2A1 1 0 006 5v9.114A4.369 4.369 0 005 14c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V7.82l8-1.6v5.894A4.37 4.37 0 0015 12c-1.657 0-3 1.343-3 3s1.343 3 3 3 3-1.343 3-3V3z" /></svg>
            </div>
            <div id="pause-icon">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM6.75 9.25a.75.75 0 000 1.5h6.5a.75.75 0 000-1.5h-6.5z" clip-rule="evenodd" /></svg>
            </div>
        </button>

        <header id="letterHeader" class="text-center mb-8 hidden">
            <h1 class="font-dancing-script text-4xl sm:text-5xl text-pink-300">Para: [Persona a dedicar]</h1>
            <p class="text-slate-400 mt-2 text-base sm:text-lg">Una fecha especial</p>
        </header>

        <main id="letterBody" class="text-slate-300 text-base sm:text-lg leading-relaxed text-justify italic">
            <div id="section-1" class="letter-section hidden"><p class="mb-6">Imagina ver aquí el nombre de esa persona especial. Esta es una demostración de cómo tu mensaje puede cobrar vida de una forma única y memorable, creando una experiencia que va más allá de las palabras.</p></div>
            <div id="section-2" class="letter-section hidden"><p class="mb-6">Cada párrafo de tu dedicatoria aparecerá de forma interactiva, como si estuvieras contando una historia. Esto captura la atención y la emoción desde el primer momento hasta el último, haciendo que tu mensaje sea inolvidable.</p></div>
            <div id="section-3" class="letter-section hidden"><p class="mb-6">Puedes personalizarlo todo: el texto, los colores e incluso agregar una canción de fondo o sus fotos más especiales. Este espacio está diseñado para reflejar tus sentimientos y contar su historia de una manera que sea solo suya.</p></div>
            <div id="section-4" class="letter-section hidden"><p class="text-center font-semibold text-pink-400 mb-4 text-base sm:text-lg">El toque final es una hermosa animación que sella la carta, dejando un recuerdo imborrable. ¿Estás listo para crear tu propia dedicatoria web?</p></div>
        </main>
        
        <div id="interactive-zone" class="text-center mt-4">
            <div id="continue-container" class="hidden"><button id="continue-button" class="transition-transform transform hover:scale-110"><svg class="w-14 h-14 text-pink-400 hover:text-pink-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/></svg><span class="text-slate-400 text-sm">Toca para continuar</span></button></div>
        </div>

        <footer id="letterFooter" class="text-right mt-4 hidden">
            <p class="font-dancing-script text-3xl sm:text-4xl text-pink-300">Con todo mi cariño,</p>
            <p class="font-dancing-script text-3xl sm:text-3xl text-slate-300 mt-1">[Tu nombre]</p>
        </footer>

        <div id="final-button-container" class="hidden text-center mt-8">
            <button id="close-envelope-button" class="bg-pink-500 text-white font-bold py-3 px-8 rounded-full shadow-lg hover:bg-pink-600 transition-transform transform hover:scale-105 duration-300 text-lg">Cerrar demo</button>
        </div>
        
        <div id="whatsapp-container" class="mt-12 text-center hidden">
            <a href="https://wa.me/51921926732?text=Quiero%20informaci%C3%B3n%20para%20dedicatoria%20Web" target="_blank" class="inline-block bg-green-500 text-white font-bold py-4 px-8 rounded-full shadow-lg hover:bg-green-600 transition-transform transform hover:scale-105 duration-300 text-lg">
                ¿Quieres crear una dedicatoria así?
            </a>
        </div>

        <div id="plans-container" class="mt-10 pt-8 border-t border-slate-700 hidden">
            <h2 class="font-dancing-script text-3xl sm:text-4xl text-pink-300 mb-8 text-center">Elige Tu Plan Ideal</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="plan-card cursor-pointer bg-slate-700/40 p-6 rounded-xl border border-slate-600 shadow-lg hover:border-pink-400 transition-all duration-300 transform hover:-translate-y-1">
                    <a href="https://wa.me/51921926732?text=Hola%2C%20quiero%20m%C3%A1s%20informaci%C3%B3n%20sobre%20el%20Plan%20Cl%C3%A1sico." target="_blank" class="font-dancing-script text-3xl text-pink-400 hover:text-pink-300 transition-colors block text-center">Plan Clásico</a>
                    <p class="text-slate-400 mt-4 text-center text-sm leading-relaxed">La dedicatoria perfecta para expresar tus sentimientos. Incluye <strong>tu texto personalizado y una melodía de fondo</strong> para crear un momento especial.</p>
                </div>

                <div class="plan-card cursor-pointer bg-slate-700/60 p-6 rounded-xl border-2 border-pink-500 shadow-lg shadow-pink-500/20 transform hover:-translate-y-1 transition-all duration-300">
                    <a href="https://wa.me/51921926732?text=Hola%2C%20quiero%20m%C3%A1s%20informaci%C3%B3n%20sobre%20el%20Plan%20Especial." target="_blank" class="font-dancing-script text-3xl text-pink-400 hover:text-pink-300 transition-colors block text-center">Plan Especial</a>
                    <p class="text-slate-400 mt-4 text-center text-sm leading-relaxed">Una dedicatoria emotiva que combina <strong>texto, una melodía y una selección de imágenes</strong> para dar vida a tus recuerdos.</p>
                </div>

                <div class="plan-card cursor-pointer bg-slate-700/40 p-6 rounded-xl border border-slate-600 shadow-lg hover:border-pink-400 transition-all duration-300 transform hover:-translate-y-1">
                    <a href="https://wa.me/51921926732?text=Hola%2C%20quiero%20m%C3%A1s%20informaci%C3%B3n%20sobre%20el%20Plan%20Premium." target="_blank" class="font-dancing-script text-3xl text-pink-400 hover:text-pink-300 transition-colors block text-center">Plan Premium</a>
                    <p class="text-slate-400 mt-4 text-center text-sm leading-relaxed">La experiencia <strong>totalmente personalizada</strong>. Incluye <strong>videos, animaciones</strong> y detalles únicos para una dedicatoria inolvidable.</p>
                </div>
            </div>
        </div>
        </div>
    
    <div id="envelope-container" class="hidden fixed inset-0 w-full h-full flex items-center justify-center pointer-events-none">
        <div id="envelope-overlay" class="w-64 h-64 relative">
            <svg viewBox="0 0 100 100" class="w-full h-full">
                <rect x="0" y="25" width="100" height="50" fill="#2c2240"/><rect x="5" y="15" width="90" height="60" fill="#1e1b26" stroke="#4a4458" stroke-width="1"/><path d="M 0 25 L 50 50 L 0 75 Z" fill="#251e36"/><path d="M 100 25 L 50 50 L 100 75 Z" fill="#251e36"/><path d="M 0 75 L 50 50 L 100 75 Z" fill="#4c2c54"/><path id="envelope-flap" d="M 0 25 L 50 50 L 100 25 Z" fill="#4c2c54"/>
            </svg>
        </div>
    </div>

    <script>
        // Declaración de constantes para los elementos del DOM
        const openButton = document.getElementById('openLetterButton');
        const introContainer = document.getElementById('introContainer');
        const letterCard = document.getElementById('letterCard');
        const letterHeader = document.getElementById('letterHeader');
        const letterFooter = document.getElementById('letterFooter');
        const continueContainer = document.getElementById('continue-container');
        const continueButton = document.getElementById('continue-button');
        const interactiveZone = document.getElementById('interactive-zone'); // Definido para controlar el espacio
        const finalButtonContainer = document.getElementById('final-button-container');
        const closeEnvelopeButton = document.getElementById('close-envelope-button');
        const envelopeContainer = document.getElementById('envelope-container');
        const whatsappContainer = document.getElementById('whatsapp-container');
        const plansContainer = document.getElementById('plans-container');
        const backgroundMusic = document.getElementById('background-music');
        const musicControlButton = document.getElementById('music-control-button');
        const playIcon = document.getElementById('play-icon');
        const pauseIcon = document.getElementById('pause-icon');

        const letterSections = document.querySelectorAll('.letter-section');
        let currentSectionIndex = 0;
        let musicStarted = false;

        // Función para revelar las secciones de la carta una por una
        function revealNextPart() {
            if (currentSectionIndex < letterSections.length) {
                const section = letterSections[currentSectionIndex];
                section.classList.remove('hidden');
                section.classList.add('reveal-block-animation');
                currentSectionIndex++;
            } else {
                // Muestra los elementos finales cuando se terminan las secciones
                letterFooter.classList.remove('hidden');
                letterFooter.classList.add('reveal-block-animation');
                
                finalButtonContainer.classList.remove('hidden');
                finalButtonContainer.classList.add('reveal-block-animation');

                whatsappContainer.classList.remove('hidden');
                whatsappContainer.classList.add('reveal-block-animation');
                
                plansContainer.classList.remove('hidden');
                plansContainer.classList.add('reveal-block-animation');
                
                // Oculta completamente la zona del botón "continuar" para eliminar el espacio
                interactiveZone.classList.add('hidden'); 
            }
        }

        // Evento para el botón inicial "Ver demostración"
        openButton.addEventListener('click', () => {
            if (!musicStarted) {
                backgroundMusic.play().catch(e => console.error("Error al reproducir audio:", e));
                musicStarted = true;
                musicControlButton.classList.remove('hidden');
            }

            introContainer.classList.add('fade-out-exit');
            introContainer.addEventListener('animationend', () => {
                introContainer.classList.add('hidden');
                letterCard.classList.remove('hidden');
                letterCard.classList.add('fade-in-start');
                
                letterHeader.classList.remove('hidden');
                letterHeader.classList.add('reveal-block-animation');
                revealNextPart();
                continueContainer.classList.remove('hidden');
                continueContainer.classList.add('reveal-block-animation');
            }, { once: true });
        });
        
        // Evento para el control de la música
        musicControlButton.addEventListener('click', () => {
            if (backgroundMusic.paused) {
                backgroundMusic.play().catch(e => console.error("Error al reproducir audio:", e));
                playIcon.classList.add('hidden');
                pauseIcon.classList.remove('hidden');
            } else {
                backgroundMusic.pause();
                playIcon.classList.remove('hidden');
                pauseIcon.classList.add('hidden');
            }
        });

        // Evento para continuar la lectura de la carta
        continueButton.addEventListener('click', () => {
            revealNextPart();
        });

        // Evento para cerrar la carta y mostrar la animación del sobre
        closeEnvelopeButton.addEventListener('click', () => {
            backgroundMusic.pause();
            backgroundMusic.currentTime = 0;
            letterCard.classList.add('card-close-animation');
            letterCard.addEventListener('animationend', () => {
                envelopeContainer.classList.remove('hidden');
                envelopeContainer.classList.add('fade-in-start');
            }, { once: true });
        });

        // ===============================================================
        // == INICIO: SCRIPT PARA LA SELECCIÓN DE PLANES DINÁMICA ==
        // ===============================================================
        const planCards = document.querySelectorAll('.plan-card');

        const unselectedClasses = ['bg-slate-700/40', 'border', 'border-slate-600', 'hover:border-pink-400'];
        const selectedClasses = ['bg-slate-700/60', 'border-2', 'border-pink-500', 'shadow-lg', 'shadow-pink-500/20'];

        planCards.forEach(card => {
            card.addEventListener('click', function(event) {
                if (event.target.tagName.toLowerCase() === 'a') {
                    return;
                }
                
                planCards.forEach(c => {
                    c.classList.remove(...selectedClasses);
                    c.classList.add(...unselectedClasses);
                });

                this.classList.remove(...unselectedClasses);
                this.classList.add(...selectedClasses);
            });
        });
        // ===============================================================
        // == FIN: SCRIPT PARA LA SELECCIÓN DE PLANES DINÁMICA     ==
        // ===============================================================
    </script>
</body>
</html>
